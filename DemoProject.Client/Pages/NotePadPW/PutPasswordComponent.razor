@* InputPopup.razor: a minimal popup with one input and a Save button *@
@if (IsOpen)
{
    <div class="popup-backdrop" @onclick="Close">
        <div class="popup" @onclick:stopPropagation>
            <input @bind="Value" class="form-control" placeholder="Password..." />
            <button class="w-100 btn btn-lg btn-primary" @onclick="Save">Enter</button>
        </div>
    </div>
}


@code {
    [Parameter] public bool IsOpen { get; set; }
    [Parameter] public string? Value { get; set; }
    [Parameter] public EventCallback<string?> OnSave { get; set; }
    [Parameter] public EventCallback OnClose { get; set; }


    private async Task Save()
    {
        await OnSave.InvokeAsync(Value);
        await Close();
    }


    private async Task Close()
    {
        if (OnClose.HasDelegate)
        {
            await OnClose.InvokeAsync();
        }
        IsOpen = false;
        StateHasChanged();
    }
}


<style>
    .popup-backdrop {
        position: fixed;
        inset: 0;
        background: rgba(0,0,0,0.4);
        display: grid;
        place-items: center;
    }

    .popup {
        background: #fff;
        padding: 1rem;
        width: 400px;
        border-radius: 8px;
        display: flex;
        flex-direction: column;
        gap: 0.5rem;
    }
</style>